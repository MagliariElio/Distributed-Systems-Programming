package ciociaria.annunci.it.controller.dto.mapper;

import java.util.ArrayList;
import java.util.function.Function;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

import ciociaria.annunci.it.controller.dto.AnnuncioMotoriDto;
import ciociaria.annunci.it.model.bean.AnnuncioMotori;
import ciociaria.annunci.it.model.bean.Contatti;
import ciociaria.annunci.it.model.bean.DataAnnuncio;
import ciociaria.annunci.it.model.bean.Posizione;
import ciociaria.annunci.it.model.bean.TipologiaVeicolo;
import ciociaria.annunci.it.service.ComuneService;
import ciociaria.annunci.it.service.SottocategoriaService;

@Service
public class AnnuncioMotoriDtoMapper implements Function<AnnuncioMotoriDto, AnnuncioMotori> {

	@Autowired
	private SottocategoriaService sottocategoriaService;
	
	@Autowired
	private ComuneService comuneService;
	
	@Override
	public AnnuncioMotori apply(AnnuncioMotoriDto annuncioDto) {
		
		System.out.println(annuncioDto);
		
		AnnuncioMotori annuncio = new AnnuncioMotori(annuncioDto.getVendiADistanza(), annuncioDto.getCondizioneVeicolo(),
																		annuncioDto.getAnnoImmatricolazione(),
																		annuncioDto.getLunghezzaInMetri(),
																		annuncioDto.getChilometri(), annuncioDto.getCilindrata(),
																		annuncioDto.getAlimentazione(), annuncioDto.getCambio(),
																		annuncioDto.getColore(), annuncioDto.getPorte(),
																		annuncioDto.getTipologiaMotore(),
																		new TipologiaVeicolo(annuncioDto.getMarca(), annuncioDto.getModello()));
		
		annuncio.setTitolo(annuncioDto.getTitolo());
		annuncio.setDescrizione(annuncioDto.getDescrizione());
		annuncio.setPrezzo(annuncioDto.getPrezzo());
		annuncio.setTipoInserzionista(annuncioDto.getTipoInserzionista());
		annuncio.setNaturaAnnuncio(annuncioDto.getNaturaAnnuncio());
		annuncio.setFotoAnnuncio(annuncioDto.getFotoAnnuncio());
		annuncio.setInseritoDa(null);
		annuncio.setSottocategoria(sottocategoriaService.findByName(annuncioDto.getSottocategoria()));
		annuncio.setCommenti(new ArrayList<>());
		annuncio.setSegnalazione(new ArrayList<>());
		annuncio.setDataAnnuncio(new DataAnnuncio(null, null));
		annuncio.setPosizione(new Posizione(comuneService.findByComune(annuncioDto.getComune()), annuncioDto.getIndirizzo()));
		annuncio.setContatti(new Contatti(annuncioDto.getEmail(), annuncioDto.getRecapitoTelefonico()));
		annuncio.setStato(null);
		annuncio.setModifica(null);
		annuncio.setRimozione(null);
		
		/*private String titolo;
		private String descrizione;
		private int numeroVisite;
		private double prezzo;
		private String tipoInserzionista;
		private String naturaAnnuncio;
		private List<String> fotoAnnuncio;
		private Utente inseritoDa;
		private Sottocategoria sottocategoria;
		@Valid
		private List<Commenti> commenti = new ArrayList<>();
		@Valid
		private List<Segnalazione> segnalazione = new ArrayList<>();
		@NotEmpty
		@Valid
		private DataAnnuncio dataAnnuncio;
		@Valid
		// ----------- >>
		private Posizione posizione;
		@Valid
		// ----------- >>
		private Contatti contatti;
		@NotEmpty
		@Valid
		// ----------- >>
		private Stato stato;
		@NotEmpty
		@Valid
		// ----------- >>
		private Modifica modifica;
		@Valid
		// ----------- >>
		private Rimozione rimozione;*/
		
		
		
		
		
		
		
		
		
		
		
		
		
		return annuncio;
	}

}
